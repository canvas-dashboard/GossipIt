<!doctype html>
<html lang="en" class="h-full">
<head>
<link rel="icon" type="image/x-icon" href="data:image/png;base64,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">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GossipIt</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { box-sizing: border-box; }
    * { box-sizing: border-box; }
    .fade-in { animation: fadeIn 0.3s ease-in; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .post-card { transition: transform 0.2s, box-shadow 0.2s; }
    .post-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
  </style>
</head>
<body class="h-full">
  <div id="app" class="w-full h-full bg-white"></div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const defaultConfig = {
        site_title: "GossipIt",
        site_tagline: "Get the latest gossip",
        announcement_title: "Daily Announcement",
        announcement_text: "Congratulations!, GossipIt has recently gotten customer support, in case any users have questions. If there are no Admin online, our friendly AI Assistant, Columbia, will take our place!",
        primary_color: "#333333",
        secondary_color: "#f5f5f5",
        accent_color: "#666666",
        button_color: "#4a4a4a",
        border_color: "#e0e0e0"
      };

      let currentUser = null;
      let currentPage = 'auth';

      const samplePosts = [
        {
          id: 1,
          title: "That was mean!",
          subtitle: "By Kasten Carter",
          description: "I dont know who, but someone said ''****** is crazy''. im no magician, but im PRETTY SURE they are talking about me! im sure of this because they mentioned ''He said that there is nothing bad about gay.''*mods, please take this down. this is my plea."
        },
        {
          id: 2,
          title: "Trysten",
          subtitle: "He is sweet but evil",
          description: "Do not trust him or you might lose some of your property."
        },
        {
          id: 3,
          title: "****** is crazy",
          subtitle: "Im not going to say his name but...",
          description: "I heard him talking to some people. He said that there is nothing bad about gay."
        },
        {
          id: 4,
          title: "i have huz",
          subtitle: " can not tell you her  name",
          description: "she likes me back"
        },
        {
          id: 5,
          title: "Welcome to GossipIt!",
          subtitle: "Get the latest gossip almost instantly",
          description: "This is the official website for the Gossip Paperâ„¢, the newsletter that informs readers about the latest, hottest gossip! Now, don't let those readers hanging! Post some gossip TODAY!"
        }
      ];

      // Initialize auth state
      function initAuth() {
        if (!localStorage.getItem('gossipitUsers')) {
          localStorage.setItem('gossipitUsers', JSON.stringify({}));
        }
        const loggedInUser = sessionStorage.getItem('gossipitCurrentUser');
        if (loggedInUser) {
          currentUser = loggedInUser;
          currentPage = 'dashboard';
        }
      }

      // Render functions
      function renderAuthPage() {
        const config = window.elementSdk?.config || {};
        const siteTitle = config.site_title || defaultConfig.site_title;
        const siteTagline = config.site_tagline || defaultConfig.site_tagline;
        const primaryColor = config.primary_color || defaultConfig.primary_color;
        const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
        const buttonColor = config.button_color || defaultConfig.button_color;
        const borderColor = config.border_color || defaultConfig.border_color;

        return `
        <div class="w-full h-full flex items-center justify-center fade-in" style="background-color: ${secondaryColor};">
          <div class="w-full max-w-md p-8 bg-white rounded-lg shadow-lg" style="border: 1px solid ${borderColor};">
            <div class="text-center mb-8">
              <h1 class="text-4xl font-bold mb-2" style="color: ${primaryColor};">${siteTitle}</h1>
              <p class="text-lg" style="color: ${primaryColor}; opacity: 0.7;">${siteTagline}</p>
            </div>
            <div id="auth-tabs" class="flex mb-6 rounded-lg overflow-hidden" style="border: 1px solid ${borderColor};">
              <button id="signin-tab" class="flex-1 py-3 font-semibold transition-colors" style="background-color: ${buttonColor}; color: white;">Sign In</button>
              <button id="signup-tab" class="flex-1 py-3 font-semibold transition-colors" style="background-color: white; color: ${primaryColor};">Sign Up</button>
            </div>
            <div id="signin-form" class="space-y-4">
              <div>
                <label class="block text-sm font-medium mb-2" style="color: ${primaryColor};">Username</label>
                <input type="text" id="signin-username" class="w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2" style="border: 1px solid ${borderColor}; background-color: ${secondaryColor};" />
              </div>
              <div>
                <label class="block text-sm font-medium mb-2" style="color: ${primaryColor};">Password</label>
                <input type="password" id="signin-password" class="w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2" style="border: 1px solid ${borderColor}; background-color: ${secondaryColor};" />
              </div>
              <div id="signin-error" class="text-red-600 text-sm hidden"></div>
              <button id="signin-btn" class="w-full py-3 rounded-lg font-semibold text-white transition-colors hover:opacity-90" style="background-color: ${buttonColor};">Sign In</button>
            </div>
            <div id="signup-form" class="space-y-4 hidden">
              <div>
                <label class="block text-sm font-medium mb-2" style="color: ${primaryColor};">Username</label>
                <input type="text" id="signup-username" class="w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2" style="border: 1px solid ${borderColor}; background-color: ${secondaryColor};" />
              </div>
              <div>
                <label class="block text-sm font-medium mb-2" style="color: ${primaryColor};">Password</label>
                <input type="password" id="signup-password" class="w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2" style="border: 1px solid ${borderColor}; background-color: ${secondaryColor};" />
              </div>
              <div>
                <label class="block text-sm font-medium mb-2" style="color: ${primaryColor};">Confirm Password</label>
                <input type="password" id="signup-confirm" class="w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2" style="border: 1px solid ${borderColor}; background-color: ${secondaryColor};" />
              </div>
              <div id="signup-error" class="text-red-600 text-sm hidden"></div>
              <button id="signup-btn" class="w-full py-3 rounded-lg font-semibold text-white transition-colors hover:opacity-90" style="background-color: ${buttonColor};">Sign Up</button>
            </div>
          </div>
        </div>`;
      }

      function renderDashboard() {
        const config = window.elementSdk?.config || {};
        const siteTitle = config.site_title || defaultConfig.site_title;
        const primaryColor = config.primary_color || defaultConfig.primary_color;
        const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
        const accentColor = config.accent_color || defaultConfig.accent_color;
        const buttonColor = config.button_color || defaultConfig.button_color;
        const borderColor = config.border_color || defaultConfig.border_color;

        return `
        <div class="w-full h-full flex flex-col fade-in" style="background-color: ${secondaryColor};">
          <header class="bg-white shadow-sm" style="border-bottom: 1px solid ${borderColor};">
            <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
              <div class="flex items-center space-x-6">
                <h1 class="text-2xl font-bold" style="color: ${primaryColor};">${siteTitle}</h1>
                <nav class="flex space-x-4">
                  <button id="nav-dashboard" class="px-4 py-2 rounded-lg font-medium transition-colors" style="background-color: ${buttonColor}; color: white;">Dashboard</button>
                  <button id="nav-announcements" class="px-4 py-2 rounded-lg font-medium transition-colors" style="color: ${primaryColor};">Announcements</button>
                </nav>
              </div>
              <div class="flex items-center space-x-4">
                <button id="new-gossip-btn" class="px-6 py-2 rounded-lg font-semibold text-white transition-colors hover:opacity-90" style="background-color: ${buttonColor};">+ New Gossip</button>
                <button id="signout-btn" class="px-4 py-2 rounded-lg font-medium transition-colors" style="color: ${accentColor};">Sign Out</button>
              </div>
            </div>
          </header>
          <main class="flex-1 overflow-auto">
            <div class="max-w-7xl mx-auto px-6 py-8">
              <h2 class="text-3xl font-bold mb-6" style="color: ${primaryColor};">Latest Gossip</h2>
              <div class="grid gap-6">
                ${samplePosts.map(post => `
                  <div class="post-card bg-white p-6 rounded-lg shadow-sm" style="border: 1px solid ${borderColor};">
                    <h3 class="text-xl font-bold mb-2" style="color: ${primaryColor};">${post.title}</h3>
                    <p class="text-sm font-medium mb-3" style="color: ${accentColor};">${post.subtitle}</p>
                    <p style="color: ${primaryColor}; opacity: 0.8;">${post.description}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          </main>
        </div>`;
      }

      function renderAnnouncements() {
        const config = window.elementSdk?.config || {};
        const siteTitle = config.site_title || defaultConfig.site_title;
        const announcementTitle = config.announcement_title || defaultConfig.announcement_title;
        const announcementText = config.announcement_text || defaultConfig.announcement_text;
        const primaryColor = config.primary_color || defaultConfig.primary_color;
        const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
        const accentColor = config.accent_color || defaultConfig.accent_color;
        const buttonColor = config.button_color || defaultConfig.button_color;
        const borderColor = config.border_color || defaultConfig.border_color;

        return `
        <div class="w-full h-full flex flex-col fade-in" style="background-color: ${secondaryColor};">
          <header class="bg-white shadow-sm" style="border-bottom: 1px solid ${borderColor};">
            <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
              <div class="flex items-center space-x-6">
                <h1 class="text-2xl font-bold" style="color: ${primaryColor};">${siteTitle}</h1>
                <nav class="flex space-x-4">
                  <button id="nav-dashboard" class="px-4 py-2 rounded-lg font-medium transition-colors" style="color: ${primaryColor};">Dashboard</button>
                  <button id="nav-announcements" class="px-4 py-2 rounded-lg font-medium transition-colors" style="background-color: ${buttonColor}; color: white;">Announcements</button>
                </nav>
              </div>
              <div class="flex items-center space-x-4">
                <button id="new-gossip-btn" class="px-6 py-2 rounded-lg font-semibold text-white transition-colors hover:opacity-90" style="background-color: ${buttonColor};">+ New Gossip</button>
                <button id="signout-btn" class="px-4 py-2 rounded-lg font-medium transition-colors" style="color: ${accentColor};">Sign Out</button>
              </div>
            </div>
          </header>
          <main class="flex-1 overflow-auto">
            <div class="max-w-4xl mx-auto px-6 py-8">
              <h2 class="text-3xl font-bold mb-6" style="color: ${primaryColor};">${announcementTitle}</h2>
              <div class="bg-white p-8 rounded-lg shadow-sm" style="border: 1px solid ${borderColor};">
                <p class="text-lg" style="color: ${primaryColor};">${announcementText}</p>
              </div>
            </div>
          </main>
        </div>`;
      }

      // Main render function
      function render() {
        const app = document.getElementById('app');
        if (!app) return;
        if (currentPage === 'auth') {
          app.innerHTML = renderAuthPage();
          setupAuthListeners();
        } else if (currentPage === 'dashboard') {
          app.innerHTML = renderDashboard();
          setupDashboardListeners();
        } else if (currentPage === 'announcements') {
          app.innerHTML = renderAnnouncements();
          setupAnnouncementsListeners();
        }
      }

      // Event setup functions
      function setupAuthListeners() {
        const signinTab = document.getElementById('signin-tab');
        const signupTab = document.getElementById('signup-tab');
        const signinForm = document.getElementById('signin-form');
        const signupForm = document.getElementById('signup-form');
        const signinBtn = document.getElementById('signin-btn');
        const signupBtn = document.getElementById('signup-btn');

        const config = window.elementSdk?.config || {};
        const primaryColor = config.primary_color || defaultConfig.primary_color;
        const buttonColor = config.button_color || defaultConfig.button_color;

        if (signinTab && signupTab) {
          signinTab.addEventListener('click', () => {
            signinTab.style.backgroundColor = buttonColor;
            signinTab.style.color = 'white';
            signupTab.style.backgroundColor = 'white';
            signupTab.style.color = primaryColor;
            signinForm.classList.remove('hidden');
            signupForm.classList.add('hidden');
          });
          signupTab.addEventListener('click', () => {
            signupTab.style.backgroundColor = buttonColor;
            signupTab.style.color = 'white';
            signinTab.style.backgroundColor = 'white';
            signinTab.style.color = primaryColor;
            signupForm.classList.remove('hidden');
            signinForm.classList.add('hidden');
          });
        }

        document.getElementById('signin-btn')?.addEventListener('click', handleSignIn);
        document.getElementById('signin-password')?.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') handleSignIn();
        });
        document.getElementById('signup-btn')?.addEventListener('click', handleSignUp);
        document.getElementById('signup-confirm')?.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') handleSignUp();
        });
      }

      function handleSignIn() {
        const username = document.getElementById('signin-username')?.value.trim();
        const password = document.getElementById('signin-password')?.value;
        const errorDiv = document.getElementById('signin-error');

        if (!username || !password) {
          errorDiv.textContent = 'Please fill in all fields.';
          errorDiv.classList.remove('hidden');
          return;
        }

        const users = JSON.parse(localStorage.getItem('gossipitUsers') || '{}');

        if (users[username] && users[username] === password) {
          currentUser = username;
          sessionStorage.setItem('gossipitCurrentUser', username);
          currentPage = 'dashboard';
          errorDiv.classList.add('hidden');
          render();
        } else {
          errorDiv.textContent = 'Incorrect username or password.';
          errorDiv.classList.remove('hidden');
        }
      }

      function handleSignUp() {
        const username = document.getElementById('signup-username')?.value.trim();
        const password = document.getElementById('signup-password')?.value;
        const confirm = document.getElementById('signup-confirm')?.value;
        const errorDiv = document.getElementById('signup-error');

        if (!username || !password || !confirm) {
          errorDiv.textContent = 'Please fill in all fields.';
          errorDiv.classList.remove('hidden');
          return;
        }

        if (password !== confirm) {
          errorDiv.textContent = 'Passwords do not match.';
          errorDiv.classList.remove('hidden');
          return;
        }

        const users = JSON.parse(localStorage.getItem('gossipitUsers') || '{}');

        if (users[username]) {
          errorDiv.textContent = 'Username already exists.';
          errorDiv.classList.remove('hidden');
          return;
        }

        users[username] = password;
        localStorage.setItem('gossipitUsers', JSON.stringify(users));
        currentUser = username;
        sessionStorage.setItem('gossipitCurrentUser', username);
        currentPage = 'dashboard';
        errorDiv.classList.add('hidden');
        render();
      }

      function setupDashboardListeners() {
        document.getElementById('nav-announcements')?.addEventListener('click', () => {
          currentPage = 'announcements';
          render();
        });
        document.getElementById('signout-btn')?.addEventListener('click', () => {
          sessionStorage.removeItem('gossipitCurrentUser');
          currentUser = null;
          currentPage = 'auth';
          render();
        });
        document.getElementById('new-gossip-btn')?.addEventListener('click', () => {
          window.open('https://forms.gle/3bFF9UXc9ovMVbqP8', '_blank', 'noopener,noreferrer');
        });
      }

      function setupAnnouncementsListeners() {
        document.getElementById('nav-dashboard')?.addEventListener('click', () => {
          currentPage = 'dashboard';
          render();
        });
        document.getElementById('signout-btn')?.addEventListener('click', () => {
          sessionStorage.removeItem('gossipitCurrentUser');
          currentUser = null;
          currentPage = 'auth';
          render();
        });
        document.getElementById('new-gossip-btn')?.addEventListener('click', () => {
          window.open('https://forms.gle/3bFF9UXc9ovMVbqP8', '_blank', 'noopener,noreferrer');
        });
      }

      // SDK init
      function initializeSDK() {
        if (window.elementSdk && typeof window.elementSdk.init === 'function') {
          window.elementSdk.init({
            defaultConfig,
            onConfigChange: (config) => {
              render();
            },
            mapToCapabilities: () => ({
              recolorables: [
                { get: () => config.primary_color || defaultConfig.primary_color, set: (c) => { config.primary_color = c; window.elementSdk.setConfig({ primary_color: c }); } },
                { get: () => config.secondary_color || defaultConfig.secondary_color, set: (c) => { config.secondary_color = c; window.elementSdk.setConfig({ secondary_color: c }); } },
                { get: () => config.accent_color || defaultConfig.accent_color, set: (c) => { config.accent_color = c; window.elementSdk.setConfig({ accent_color: c }); } },
                { get: () => config.button_color || defaultConfig.button_color, set: (c) => { config.button_color = c; window.elementSdk.setConfig({ button_color: c }); } },
                { get: () => config.border_color || defaultConfig.border_color, set: (c) => { config.border_color = c; window.elementSdk.setConfig({ border_color: c }); } }
              ],
              borderables: [],
              fontEditable: undefined,
              fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
              ["site_title", config.site_title || defaultConfig.site_title],
              ["site_tagline", config.site_tagline || defaultConfig.site_tagline],
              ["announcement_title", config.announcement_title || defaultConfig.announcement_title],
              ["announcement_text", config.announcement_text || defaultConfig.announcement_text]
            ])
          }).then(() => {
            initAuth();
            render();
          }).catch((err) => {
            console.error('SDK init error:', err);
            initAuth();
            render();
          });
        } else {
          // Fallback if SDK not available
          initAuth();
          render();
        }
      }

      // Initial call
      initAuth();
      initializeSDK();

    });
  </script>
<!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/69405ad018f23b1985edaa1e/1jchm5gal';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->
</body>
</html>
